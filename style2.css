/* =========================================
   НОВОЕ: УЗОРЫ ДЛЯ КАРТОЧКИ ИГРОКА
   ========================================= */

/* 1. Контейнер для узора внутри карточки */
/* Этот элемент будет создаваться JS или должен быть в HTML */
.user-card-pattern {
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    pointer-events: none;
    z-index: 0; /* Под контентом (который z-index: 2), но над фоном */
    opacity: 0.08; /* Очень легкая прозрачность для эстетики */
    
    background-repeat: repeat;
    background-position: center;
    
    /* Эстетика: наклон и легкое вращение для динамики */
    transform: rotate(-15deg);
    transition: all 0.5s ease;
}

/* 2. Конкретный узор: DICE */
.user-card-pattern.pattern-dice {
    /* Путь к твоему файлу */
    background-image: url('assets/bg/dice_bg1.svg');
    /* Размер иконок в паттерне */
    background-size: 60px 60px; 
}

/* 3. Стили для кнопок выбора узора в модалке */
.customize-color-choice.pattern-btn {
    position: relative;
    overflow: hidden;
    background-color: #2E3035; /* Темный фон кнопки */
    border: 2px solid var(--color-border-dark);
}

.pattern-preview-icon {
    width: 24px;
    height: 24px;
    object-fit: contain;
    opacity: 0.8;
    filter: invert(1); /* Делаем белым, если иконка черная */
}

/* Состояние: Заблокировано */
.customize-color-choice.locked {
    opacity: 0.5;
    cursor: not-allowed;
    border-color: #444 !important;
}

.customize-color-choice.locked:hover {
    transform: none !important;
    box-shadow: none !important;
}

.lock-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.6);
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 1.2em;
}

/* Если разблокировано - скрываем замок */
.customize-color-choice:not(.locked) .lock-overlay {
    display: none;
}

/* Выбранный паттерн (Индиго рамка) */
.customize-color-choice[data-type="pattern"].selected {
    border-color: var(--color-primary) !important;
    box-shadow: 0 0 10px var(--color-primary) !important;
}
/* =========================================
   РЕДИЗАЙН: МОДАЛКА СТАТИСТИКИ (CYBER INDIGO)
   ========================================= */

.admin-stats-modal-content {
    background: linear-gradient(145deg, #1E1B4B, #0F1020) !important; /* Глубокий темный фон */
    border: 2px solid #4F46E5 !important; /* Индиго рамка */
    box-shadow: 0 0 40px rgba(79, 70, 229, 0.4) !important; /* Мощное свечение */
    border-radius: 24px !important;
    padding: 30px !important;
    width: 95%;
    max-width: 450px;
    color: #FFFFFF !important;
}

/* Верхняя часть с ником */
.admin-stats-user-display {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-bottom: 25px;
    gap: 10px;
}

.user-avatar-placeholder.large {
    width: 70px;
    height: 70px;
    font-size: 2em;
    background: linear-gradient(135deg, #4F46E5, #818CF8);
    box-shadow: 0 0 20px rgba(79, 70, 229, 0.5);
    border: 3px solid rgba(255,255,255,0.2);
}

.stat-username {
    font-size: 1.5em;
    font-weight: 900;
    color: #FFFFFF;
    text-transform: uppercase;
    letter-spacing: 1px;
    text-shadow: 0 0 10px rgba(79, 70, 229, 0.6);
}

/* Сетка статистики */
.admin-stats-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
}

/* Карточка отдельной статистики */
.admin-stat-card {
    background-color: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 16px;
    padding: 15px;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap: 10px;
    transition: transform 0.2s;
}

.admin-stat-card:hover {
    background-color: rgba(255, 255, 255, 0.07);
    transform: translateY(-2px);
}

.admin-stat-card.full-width {
    grid-column: span 2; /* На всю ширину */
    flex-direction: row; /* Горизонтально */
    padding: 15px 25px;
    justify-content: flex-start;
    background: linear-gradient(90deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
}

/* Иконки в кружочках */
.stat-icon-wrapper {
    width: 40px;
    height: 40px;
    border-radius: 12px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 1.2em;
    flex-shrink: 0;
}
.stat-icon-wrapper img {
    width: 24px;
    height: 24px;
    object-fit: contain;
}

/* Цвета иконок */
.stat-icon-wrapper.blue { background: rgba(79, 70, 229, 0.2); border: 1px solid rgba(79, 70, 229, 0.5); }
.stat-icon-wrapper.orange { background: rgba(245, 166, 35, 0.2); border: 1px solid rgba(245, 166, 35, 0.5); }
.stat-icon-wrapper.green { background: rgba(0, 210, 106, 0.2); border: 1px solid rgba(0, 210, 106, 0.5); }

/* Тексты */
.stat-info {
    display: flex;
    flex-direction: column;
}
.admin-stat-card.full-width .stat-info {
    align-items: flex-start;
    margin-left: 10px;
}

.stat-label {
    font-size: 0.8em;
    color: rgba(255, 255, 255, 0.5);
    font-weight: 700;
    text-transform: uppercase;
}

.stat-value {
    font-size: 1.1em;
    font-weight: 900;
    font-family: 'Roboto Mono', monospace;
    color: #FFFFFF;
}
.stat-value.big {
    font-size: 1.4em;
}

/* --- ЛОГИКА WIN/LOSS ДЛЯ ПРОФИТА --- */

/* Профит > 0 (Казино в плюсе - Зеленый) */
#admin-stats-profit-box.win {
    border: 1px solid #00D26A;
    box-shadow: inset 0 0 20px rgba(0, 210, 106, 0.2);
}
#admin-stats-profit-box.win .stat-value {
    color: #00D26A;
    text-shadow: 0 0 10px rgba(0, 210, 106, 0.5);
}

/* Профит < 0 (Казино в минусе - Красный) */
#admin-stats-profit-box.loss {
    border: 1px solid #FF5555;
    box-shadow: inset 0 0 20px rgba(255, 85, 85, 0.2);
}
#admin-stats-profit-box.loss .stat-value {
    color: #FF5555;
    text-shadow: 0 0 10px rgba(255, 85, 85, 0.5);
}
#admin-stats-profit-box.loss .stat-icon-wrapper {
    background: rgba(255, 85, 85, 0.2); 
    border: 1px solid rgba(255, 85, 85, 0.5);
}
/* =========================================
   FIX: СТИЛИ СТАТИСТИКИ (CYBER INDIGO)
   ========================================= */

/* Контейнер модалки */
.admin-stats-modal-content {
    background: linear-gradient(145deg, #1E1B4B, #0F1020) !important; /* Глубокий темный фон */
    border: 2px solid #4F46E5 !important; /* Индиго рамка */
    box-shadow: 0 0 40px rgba(79, 70, 229, 0.4) !important; /* Свечение */
    border-radius: 24px !important;
    padding: 30px !important;
    width: 95%;
    max-width: 450px;
    color: #FFFFFF !important;
    display: block !important; /* Фикс отображения */
}

/* Шапка профиля */
.admin-stats-user-display {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-bottom: 25px;
    gap: 10px;
}

.user-avatar-placeholder.large {
    width: 80px;
    height: 80px;
    font-size: 2.5em;
    font-weight: 800;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    background: linear-gradient(135deg, #4F46E5, #818CF8);
    box-shadow: 0 0 20px rgba(79, 70, 229, 0.5);
    border: 3px solid rgba(255,255,255,0.2);
    color: #FFF;
}

.stat-username {
    font-size: 1.5em;
    font-weight: 900;
    color: #FFFFFF;
    text-transform: uppercase;
    letter-spacing: 1px;
    text-shadow: 0 0 10px rgba(79, 70, 229, 0.6);
}

/* Сетка карточек */
.admin-stats-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
}

/* Карточка статистики */
.admin-stat-card {
    background-color: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 16px;
    padding: 15px;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap: 10px;
    transition: transform 0.2s;
}

.admin-stat-card:hover {
    background-color: rgba(255, 255, 255, 0.07);
    transform: translateY(-2px);
}

/* Карточка на всю ширину */
.admin-stat-card.full-width {
    grid-column: span 2;
    flex-direction: row;
    padding: 15px 25px;
    justify-content: flex-start;
    background: linear-gradient(90deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
}

/* Иконки */
.stat-icon-wrapper {
    width: 40px;
    height: 40px;
    border-radius: 12px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 1.2em;
    flex-shrink: 0;
}
.stat-icon-wrapper img {
    width: 24px;
    height: 24px;
    object-fit: contain;
}

/* Цвета иконок */
.stat-icon-wrapper.blue { background: rgba(79, 70, 229, 0.2); border: 1px solid rgba(79, 70, 229, 0.5); }
.stat-icon-wrapper.orange { background: rgba(79, 70, 229, 0.2); border: 1px solid rgba(79, 70, 229, 0.5); }
.stat-icon-wrapper.green { background: rgba(0, 210, 106, 0.2); border: 1px solid rgba(0, 210, 106, 0.5); }

/* Текст */
.stat-info {
    display: flex;
    flex-direction: column;
}
.admin-stat-card.full-width .stat-info {
    align-items: flex-start;
    margin-left: 15px;
}

.stat-label {
    font-size: 0.75em;
    color: rgba(255, 255, 255, 0.5);
    font-weight: 700;
    text-transform: uppercase;
}

.stat-value {
    font-size: 1.1em;
    font-weight: 900;
    font-family: 'Roboto Mono', monospace;
    color: #FFFFFF;
}
.stat-value.big {
    font-size: 1.4em;
}

/* Состояния профита */
.admin-stat-card.full-width.win {
    border: 1px solid #00D26A;
    box-shadow: inset 0 0 20px rgba(0, 210, 106, 0.1);
}
.admin-stat-card.full-width.win .stat-value { color: #00D26A; text-shadow: 0 0 10px rgba(0, 210, 106, 0.5); }

.admin-stat-card.full-width.loss {
    border: 1px solid #FF5555;
    box-shadow: inset 0 0 20px rgba(255, 85, 85, 0.1);
}
.admin-stat-card.full-width.loss .stat-value { color: #FF5555; text-shadow: 0 0 10px rgba(255, 85, 85, 0.5); }
.admin-stat-card.full-width.loss .stat-icon-wrapper { background: rgba(255, 85, 85, 0.2); border-color: #FF5555; }
/* =========================================
   ПУБЛИЧНЫЙ ПРОФИЛЬ (CYBER INDIGO STYLE)
   ========================================= */

.public-profile-content {
    background: linear-gradient(145deg, #1E1B4B, #0F1020) !important;
    border: 2px solid #4F46E5 !important;
    box-shadow: 0 0 50px rgba(79, 70, 229, 0.5) !important;
    border-radius: 24px !important;
    padding: 30px !important;
    width: 95%;
    max-width: 420px;
    color: #FFFFFF !important;
    position: relative;
    overflow: hidden;
}

/* Декоративный фон */
.public-profile-content::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(79, 70, 229, 0.1) 0%, transparent 70%);
    pointer-events: none;
    z-index: 0;
}

.wallet-modal-close {
    z-index: 10; /* Поверх фона */
}

/* --- ШАПКА --- */
.pp-header {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-bottom: 25px;
    position: relative;
    z-index: 1;
}

.pp-avatar-container {
    position: relative;
    margin-bottom: 15px;
}

.pp-avatar {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    border: 4px solid #4F46E5;
    box-shadow: 0 0 25px rgba(79, 70, 229, 0.6);
    object-fit: cover;
    background-color: #2E3035;
}

.pp-rank-icon {
    position: absolute;
    bottom: 0;
    right: 0;
    width: 36px;
    height: 36px;
    background-color: #1E1B4B;
    border: 2px solid #F5A623;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: 0 4px 10px rgba(0,0,0,0.5);
}

.pp-rank-icon img {
    width: 24px;
    height: 24px;
    object-fit: contain;
}

.pp-user-info {
    text-align: center;
}

.pp-username {
    font-size: 1.8em;
    font-weight: 900;
    margin: 0;
    background: linear-gradient(90deg, #FFFFFF, #A5B4FC);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: 0 4px 10px rgba(79, 70, 229, 0.3);
}

.pp-rank-text {
    display: block;
    color: #F5A623;
    font-weight: 800;
    text-transform: uppercase;
    font-size: 0.9em;
    margin-top: 5px;
    letter-spacing: 1px;
}

.pp-date {
    display: block;
    color: rgba(255,255,255,0.4);
    font-size: 0.8em;
    margin-top: 2px;
}

/* --- СТАТИСТИКА --- */
.pp-stats-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    margin-bottom: 20px;
    position: relative;
    z-index: 1;
}

.pp-stat-card {
    background-color: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 16px;
    padding: 12px;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap: 8px;
    transition: transform 0.2s;
}

.pp-stat-card:hover {
    transform: translateY(-2px);
    background-color: rgba(255, 255, 255, 0.08);
    border-color: rgba(79, 70, 229, 0.4);
}

.pp-stat-card.full {
    grid-column: span 2;
    flex-direction: row;
    padding: 15px 20px;
    gap: 15px;
    justify-content: flex-start;
    background: linear-gradient(90deg, rgba(255,255,255,0.05), rgba(79,70,229,0.05));
}

.pp-icon-box {
    width: 36px;
    height: 36px;
    border-radius: 10px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 1.2em;
    flex-shrink: 0;
}
.pp-icon-box.indigo { background: rgba(79, 70, 229, 0.2); color: #818CF8; }
.pp-icon-box.green { background: rgba(0, 210, 106, 0.2); color: #00D26A; }
.pp-icon-box.orange { background: rgba(245, 166, 35, 0.2); color: #F5A623; }

.pp-stat-data {
    display: flex;
    flex-direction: column;
    align-items: center;
}
.pp-stat-card.full .pp-stat-data {
    align-items: flex-start;
}

.pp-label {
    font-size: 0.75em;
    color: rgba(255,255,255,0.5);
    font-weight: 700;
    text-transform: uppercase;
}

.pp-stat-card strong {
    font-family: 'Roboto Mono', monospace;
    font-size: 1.1em;
    color: #FFF;
}
.pp-stat-card .win-text {
    color: #00D26A;
    text-shadow: 0 0 10px rgba(0, 210, 106, 0.4);
}

/* --- ЛЮБИМАЯ ИГРА --- */
.pp-favorite-game {
    background-color: rgba(0, 0, 0, 0.3);
    border-radius: 12px;
    padding: 12px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: relative;
    z-index: 1;
}

.pp-fav-label {
    font-size: 0.9em;
    color: rgba(255,255,255,0.7);
    font-weight: 600;
}

.pp-fav-content {
    display: flex;
    align-items: center;
    gap: 8px;
}

.pp-fav-content img {
    width: 24px;
    height: 24px;
    object-fit: contain;
}

.pp-fav-content span {
    color: #F5A623;
    font-weight: 800;
    text-transform: uppercase;
    font-size: 0.9em;
}
/* =========================================
   СТРАНИЦА ПУБЛИЧНОГО ПРОФИЛЯ (TAB)
   ========================================= */

/* Контейнер такой же, как у обычного профиля, но с нюансами */
.public-profile-container {
    background-color: var(--text-main) !important; /* Темно-синий */
    border: 1px solid var(--color-primary) !important;
    box-shadow: 0 4px 20px rgba(30, 27, 75, 0.5) !important;
    padding: 25px !important;
    display: flex;
    flex-direction: column;
    gap: 20px;
    max-width: 600px !important; /* Чуть шире для статистики */
}

/* Кнопка Назад */
.pp-back-btn {
    background: transparent;
    border: none;
    color: rgba(255,255,255,0.6);
    font-size: 0.9em;
    font-weight: 700;
    cursor: pointer;
    align-self: flex-start;
    margin-bottom: -10px;
    transition: color 0.2s;
}
.pp-back-btn:hover {
    color: #FFFFFF;
}

/* Шапка профиля (Модификация user-info-card) */
.user-info-card.public-mode {
    margin-bottom: 10px;
    background: linear-gradient(145deg, #23214A, #1E1B4B) !important;
    box-shadow: inset 0 0 30px rgba(0,0,0,0.2);
}

/* Аватар с бейджем ранга */
.pp-avatar-wrapper {
    position: relative;
    width: 110px;
    height: 110px;
}

.pp-rank-badge {
    position: absolute;
    bottom: 0;
    right: 0;
    width: 40px;
    height: 40px;
    background-color: #1E1B4B;
    border: 2px solid #F5A623;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 5;
    box-shadow: 0 4px 10px rgba(0,0,0,0.5);
}
.pp-rank-badge img {
    width: 26px;
    height: 26px;
    object-fit: contain;
}

/* Тексты в шапке */
#pp-page-username {
    color: #FFFFFF !important;
    font-size: 2em;
    font-weight: 900;
    margin: 0;
    text-shadow: 0 0 15px rgba(79, 70, 229, 0.5);
}

.pp-rank-label {
    display: block;
    color: #F5A623; /* Золотой */
    font-weight: 800;
    text-transform: uppercase;
    font-size: 1em;
    margin-top: 5px;
    letter-spacing: 1px;
}

.pp-date-label {
    display: block;
    color: rgba(255,255,255,0.4);
    font-size: 0.85em;
    margin-top: 4px;
}

/* Сетка статистики */
.pp-stats-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
}

.pp-stat-box {
    background-color: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 16px;
    padding: 15px;
    display: flex;
    align-items: center;
    gap: 15px;
    transition: transform 0.2s;
}
.pp-stat-box:hover {
    transform: translateY(-2px);
    background-color: rgba(255, 255, 255, 0.06);
    border-color: rgba(79, 70, 229, 0.3);
}

.pp-stat-box.full {
    grid-column: span 2;
    background: linear-gradient(90deg, rgba(255,255,255,0.03), rgba(79,70,229,0.05));
}

/* Иконки статистики */
.pp-stat-icon {
    width: 45px;
    height: 45px;
    border-radius: 12px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 1.4em;
    flex-shrink: 0;
}
.pp-stat-icon.indigo { background: rgba(79, 70, 229, 0.2); color: #818CF8; border: 1px solid rgba(79,70,229,0.3); }
.pp-stat-icon.green { background: rgba(0, 210, 106, 0.2); color: #00D26A; border: 1px solid rgba(0,210,106,0.3); }
.pp-stat-icon.orange { background: rgba(245, 166, 35, 0.2); color: #F5A623; border: 1px solid rgba(245,166,35,0.3); }

/* Данные статистики */
.pp-stat-info {
    display: flex;
    flex-direction: column;
}

.pp-stat-title {
    font-size: 0.8em;
    color: rgba(255,255,255,0.5);
    font-weight: 700;
    text-transform: uppercase;
}

.pp-stat-info strong {
    font-family: 'Roboto Mono', monospace;
    font-size: 1.2em;
    color: #FFFFFF;
    font-weight: 900;
}
.pp-stat-info .win-text {
    color: #00D26A;
    text-shadow: 0 0 10px rgba(0, 210, 106, 0.4);
}

/* Любимая игра */
.pp-fav-game-card {
    background-color: rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.05);
    border-radius: 16px;
    padding: 15px 25px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.pp-fav-title {
    color: rgba(255,255,255,0.6);
    font-weight: 700;
    font-size: 0.95em;
}

.pp-fav-body {
    display: flex;
    align-items: center;
    gap: 10px;
}

.pp-fav-body img {
    width: 28px;
    height: 28px;
    object-fit: contain;
}

.pp-fav-body span {
    color: #F5A623;
    font-weight: 900;
    font-size: 1.1em;
    text-transform: uppercase;
}

/* Мобильная адаптация */
@media (max-width: 480px) {
    .user-info-card.public-mode {
        flex-direction: column;
        text-align: center;
        padding: 20px;
    }
    .pp-rank-badge {
        right: -5px;
    }
    .pp-stats-grid {
        grid-template-columns: 1fr; /* Одна колонка для статов */
    }
    .pp-stat-box.full {
        grid-column: span 1;
    }
}
/* =========================================
   КНОПКА ПРОФИЛЯ В ИСТОРИИ (HEADER)
   ========================================= */

.vh-profile-btn {
    margin-left: auto; /* Прижимает кнопку вправо, к крестику */
    margin-right: 15px; /* Отступ от крестика */
    
    background: rgba(79, 70, 229, 0.15); /* Прозрачный индиго */
    border: 1px solid #4F46E5;
    color: #A5B4FC; /* Светлый текст */
    
    padding: 6px 14px;
    border-radius: 8px;
    
    font-size: 0.85em;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    gap: 6px;
}

.vh-profile-btn:hover {
    background: #4F46E5; /* Заливка при наведении */
    color: #FFFFFF;
    box-shadow: 0 0 15px rgba(79, 70, 229, 0.4);
    transform: translateY(-1px);
}

.vh-profile-btn:active {
    transform: translateY(1px);
}

/* Адаптация для мобильных */
@media (max-width: 400px) {
    .vh-profile-btn {
        font-size: 0.75em;
        padding: 5px 10px;
        margin-right: 10px;
    }
    .vh-profile-btn span {
        display: none; /* Можно скрыть текст, оставить иконку если мало места */
    }
}
/* =========================================
   PUBLIC PROFILE UPDATES (INDIGO & PATTERN)
   ========================================= */

/* Ранг (Indigo) */
.pp-rank-label {
    color: var(--color-primary) !important; /* Indigo */
}

/* Любимая игра (Indigo) */
.pp-fav-content span {
    color: var(--color-primary) !important; /* Indigo */
}

/* Контейнер узора в карточке */
.user-card-pattern {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0.1; /* Легкая прозрачность для узора */
    background-repeat: repeat;
    background-position: center;
    z-index: 0; /* Под контентом */
    pointer-events: none;
}

/* Убедимся, что контент поверх узора */
.user-info-left, .user-info-right {
    position: relative;
    z-index: 2;
}
/* =========================================
   FIX: VISUAL HISTORY GRID (MINES & KENO)
   ========================================= */

/* Общий контейнер */
.visual-grid-container {
    background-color: rgba(30, 33, 40, 0.5);
    border-radius: 12px;
    padding: 10px;
    margin: 0 auto;
    width: 100%;
    box-sizing: border-box; /* Важно! */
}

/* --- MINES FIX --- */
.visual-grid-container.mines-visual {
    display: grid !important; /* Принудительно Grid */
    grid-template-columns: repeat(5, 1fr) !important; /* Принудительно 5 колонок */
    grid-template-rows: repeat(5, 1fr) !important;    /* Принудительно 5 рядов */
    gap: 5px !important;
    aspect-ratio: 1 / 1 !important; /* Квадратная форма */
    width: 100% !important;
    overflow: hidden; /* Обрезаем лишнее, но сетка внутри должна быть корректной */
    position: relative;
}

/* Стили ячеек Mines внутри истории */
.visual-grid-container.mines-visual .visual-cell.mine-cell {
    width: 100% !important;
    height: 100% !important;
    aspect-ratio: 1 / 1 !important;
    margin: 0 !important;
    display: flex !important;
    justify-content: center;
    align-items: center;
}

/* --- KENO FIX --- */
.visual-grid-container.keno-visual {
    display: grid !important; /* Принудительно Grid */
    grid-template-columns: repeat(8, 1fr) !important; /* Принудительно 8 колонок */
    grid-auto-rows: 1fr; /* Автоматическая высота рядов */
    gap: 4px !important;
    width: 100% !important;
    aspect-ratio: 8 / 5; /* Соотношение сторон для Кено (8x5) */
    overflow: visible !important; /* Для кено лучше убрать скрытие, чтобы не резало края */
}

/* Стили ячеек Keno внутри истории */
.visual-grid-container.keno-visual .visual-cell.keno-cell {
    width: 100% !important;
    height: auto !important;
    aspect-ratio: 1 / 1 !important;
    font-size: 0.8em;
    display: flex !important;
    justify-content: center;
    align-items: center;
}

/* ФИКС ИКОНОК: Чтобы картинки не распирали ячейки */
.visual-cell img {
    max-width: 80% !important;
    max-height: 80% !important;
    width: auto !important;
    height: auto !important;
    object-fit: contain !important;
    position: static !important; /* Убираем absolute, если он был */
}
/* --- ОБНОВЛЕНИЕ: Иконки в статистике Публичного профиля --- */
.pp-stat-icon img {
    width: 34px;
    height: 34px;
    object-fit: contain;
    /* Делаем иконки белыми, если они черные, или оставляем как есть */
    /* filter: brightness(0) invert(1); - раскомментируй, если иконки черные */
}

/* Удаляем старые стили для span внутри иконок, если они мешают */
.pp-stat-icon span {
    display: none;
}

/* --- ОБНОВЛЕНИЕ: Синхронизация визуальных стилей карточки --- */

/* Убеждаемся, что узор позиционируется правильно в публичной карточке */
.user-info-card.public-mode {
    position: relative;
    overflow: hidden; /* Чтобы узор не вылезал */
    z-index: 1;
}

/* Слой узора */
.user-info-card.public-mode .user-card-pattern {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0.15; /* Чуть заметнее */
    pointer-events: none;
    z-index: 0; /* На заднем плане */
    background-repeat: repeat;
    background-position: center;
}

/* Поднимаем контент над узором */
.user-info-card.public-mode .user-info-left,
.user-info-card.public-mode .user-info-right {
    position: relative;
    z-index: 2;
}

/* Классы для конкретных узоров (должны совпадать с теми, что в customize.js) */
.pattern-dice {
    background-image: url('assets/bg/dice_bg1.svg');
    background-size: 60px 60px;
}
/* Добавь другие паттерны сюда по аналогии, если они есть */
/* =========================================
   FIX: PUBLIC PROFILE SYNC & ICONS
   ========================================= */

/* 1. Полная синхронизация базы карточки */
.user-info-card.public-mode {
    margin-bottom: 10px;
    /* Копируем стили из .user-info-card (Личный профиль) */
    background: linear-gradient(135deg, rgba(30, 27, 75, 0.95) 0%, rgba(49, 46, 129, 0.9) 100%) !important;
    border: 1px solid rgba(255, 255, 255, 0.15) !important;
    box-shadow: 0 15px 35px rgba(30, 27, 75, 0.25) !important;
    
    /* Важно для паттерна */
    position: relative;
    z-index: 1;
}

/* 2. Синхронизация прозрачности узора */
.user-info-card.public-mode .user-card-pattern {
    opacity: 0.08 !important; /* Делаем как в личном профиле (было 0.15) */
    z-index: 0;
}

/* Поднимаем контент над узором */
.user-info-card.public-mode .user-info-left,
.user-info-card.public-mode .user-info-right {
    position: relative;
    z-index: 2;
}

/* 3. Настройка новых SVG иконок */
.pp-stat-icon img {
    width: 26px;
    height: 26px;
    object-fit: contain;
    /* Тень для лучшей видимости на цветном фоне */
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
}

/* Убираем старые span-иконки, если они остались */
.pp-stat-icon span {
    display: none;
}
/* =========================================
   FIX: FAVORITE GAME COLOR (INDIGO)
   ========================================= */

/* Название игры в публичном профиле */
.pp-fav-body span#pp-page-fav-name {
    color: #4F46E5 !important; /* Индиго */
    text-shadow: 0 0 10px rgba(79, 70, 229, 0.3); /* Легкое свечение в тон */
}
/* =========================================
   PUBLIC PROFILE STATS DETAILS (MENU)
   ========================================= */

/* Контейнер модалки (меню) */
.pp-details-container {
    background: linear-gradient(135deg, #1E1B4B, #23214A) !important; /* Темный фон */
    border: 1px solid rgba(79, 70, 229, 0.4) !important; /* Индиго рамка */
    box-shadow: 0 0 50px rgba(0,0,0,0.5) !important;
    padding: 20px;
    border-radius: 20px;
    width: 100%;
    max-width: 320px; /* Компактная ширина */
    position: relative;
    animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    margin: 0 !important; /* Сброс маргинов */
    transform: translate(0px, -350px) !important;
}

.pp-details-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

/* Заголовок (Белый цвет) */
.pp-details-header h3 {
    margin: 0;
    color: #FFFFFF !important; /* <-- БЕЛЫЙ */
    font-size: 1.1em;
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Список строк */
.pp-details-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
    max-height: 60vh;
    overflow-y: auto;
}

/* Одна строка игры */
.pp-detail-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: rgba(255, 255, 255, 0.05);
    padding: 10px 15px;
    border-radius: 12px;
    transition: 0.2s;
}

.pp-detail-row:hover {
    background: rgba(255, 255, 255, 0.1);
    transform: translateX(5px);
}

.pp-detail-left {
    display: flex;
    align-items: center;
    gap: 12px;
}

.pp-detail-icon {
    width: 24px;
    height: 24px;
    object-fit: contain;
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
}

.pp-detail-name {
    color: #ccc;
    font-size: 0.95em;
    font-weight: 600;
}

.pp-detail-value {
    color: #fff;
    font-weight: 700;
    font-size: 1em;
    text-align: right;
}

/* Кнопка закрытия */
#pp-details-close {
    color: rgba(255,255,255,0.6);
    background: transparent;
    border: none;
    font-size: 1.2em;
    cursor: pointer;
    padding: 5px;
}
#pp-details-close:hover {
    color: #FFF;
}

/* Подсветка значения (зеленый для денег, белый для игр) */
.pp-detail-value.money {
    color: #4ade80; /* Зеленый */
    text-shadow: 0 0 10px rgba(74, 222, 128, 0.3);
}

/* Курсор для кликабельных плашек в профиле */
.pp-stat-box.clickable {
    cursor: pointer;
    transition: transform 0.2s, background 0.2s;
}

.pp-stat-box.clickable:hover {
    transform: translateY(-3px);
    background: rgba(255, 255, 255, 0.05);
}

.pp-stat-box.clickable:active {
    transform: scale(0.98);
}
/* =========================================
   FIX: VISUAL HISTORY MODAL CENTERING
   ========================================= */

#visual-history-modal-overlay.user-modal-overlay {
    display: flex !important;           /* Включаем Flexbox */
    align-items: center !important;     /* Центрируем по вертикали */
    justify-content: center !important; /* Центрируем по горизонтали */
    
    position: fixed !important;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 3000; /* Поверх всего */
    padding: 20px; /* Отступы от краев на мобильных */
    
    /* Убираем возможные отступы, которые могли сдвигать контент */
    margin: 0 !important;
}

/* Контент модалки */
.visual-history-content {
    margin: 0 auto !important; /* Центрируем блок внутри флекса */
    position: relative !important;
    transform: none !important; /* Сбрасываем трансформации, если они были */
    
    /* Ограничиваем высоту, чтобы на маленьких экранах появлялся скролл внутри, а не уезжало окно */
    max-height: 90vh; 
    overflow-y: auto;
}
